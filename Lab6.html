<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=map-usa&code=LYTwwgFghgTgLgOgM4QPYHcAyqoBMCWAdgOYAUAlANwBQ1ABA3QCQLECmcpA5BHHAA5IAXAHoRMKOlb44EAK4AjOUjYwAxqkJw2WhBuAiNuNgDNUE4KvxqohgDbWA1gH1ZUOM7SpcI4FCTaMCL8ig5qIrjutgoSAF74dgC0Ae5sSKxsqABWSJpcADR0JnKEanD4mnSkMQBSuYTkdADe9IwMoJCwiBD4xth4RGRUrW1satDw6TBsxPgBqgCyUPzcAEIASgV0tfXDI4wahAF0UISoSHQAvHQA2lwAKqhwUHZbXABMAAwAjAAcb19vgBOAGfL6g97fCHvLgAXRo-wYh2OkVw5wACuYAIJnK7NRGMABEj2edkJQluzTohMIUEs5OpWLU00JhUJADcXnI2AzvgBmb4AFjoAF9Ck1qbT6RTCVi7FBiDgkKzqZy7NyGQBWADsADYgaLxZK6TyZVi_PwAIcqjlc010b7vXV8w1UmkmhmyvyxTT-G1qjUUzW_T4usVuqX2wmrKA9KD-u0Mp2CzWa10S93S6lgNiwa1sgP2766nXa9PGrOEgAiczgMBkqDoADE2MYJGSC4mKd9td9PuXM1GAKJIfgAW_rcEbAGVTlOE-r7Zr3oKDeGM5HPQBxVD4S3KzuLhl6zXC9cVqNLCSECAAY9QC8DdF-fKBZ6Ng89SyndC3MHOuSPvagrFr8A6bjK36Nn-AGNmidDTnIHaql2dDvHyfL9uen6QUQ_i_qoUBzEBvICvq4EejK6J5iR3ZkWW2EQdS1ESGOCjxoeT6ptq74RpRzGwKc-YoUeFJArqgrvBRlboqoUpKBotEOr2vy6tJUbovgUByGOSl8u8vxrh-TGEusFR0MYdA1KcbD4P-Sl_DxaaMfxpnmX-pyWfBABy5jaEpwa_FJLmVmZ0HXl5M5IUpQL6d86meusmi4AAL4QWlKV8EkJTKSUSPgfhKb82oMcZrmzloUB0GAUT1rSemSaVfGVtO950NRSEPpxRaCrqvzOWVLWqLM_A8t1DJ8rqQo5dSjw2FoRAHiJT5_JJop0LC-QEgwhKAr8DI3M1UZMiy40Uq-akhcd8qKn6Z0OhhWGDcdFrCbaol0Jh8VXZ65pQD6tJLe9K19t9z2ejGcYBcuT1HZ6OY0fdgrapqsMbq5NYBJOjYtm2LxKSBaMXp6I7jtjCFzl1y09Z8RlwzKO57kDha8rFwXg5Bgk3veDlAtq7P09SUG_v-SCAfdjpOjNhLCzBYtwVFyHA_afUC-jlYLHhFxboRxH3Rhmpg4LhIsW9LPnU6l0cwJrHsQ5fLakTOE20JmV8iG0uyTA8lyIpSOpnT6saVpOlFYKvFB4l5mWdZhC2fZSN9Ubke5e5EVsBZja-fAY3U6RnwDcbYUi55GfwYhSvm2hybS0lhCpelHF5xSzoR8TuXmERhX3ehyft9SFXPNVtV4UVvxgT9MqtY2HV2FTysTdqGHS9Ow34KNMWvtLc1zotBOO-tm3bdSgJAgdxsnbnC8Uu8B-T4yN1Kg5nzkffXrLGbqHoWr_fvwDd3NzoECcS0tIYZXuqjaab8EYwE_h9SEqZpaYzrA2ZsrZCKV1Qu7H-ztCSkwnKgwe88q5AmKtLRm-4HIlkDr_K8pw7zENQvyUh0tZai3FoAkqTsTJsNgpnBC0V_Y0NwZrQGBF8rMy_o7HBJlTaZT1G3XBLEoBsSbtfIBa037KMIHAla2oPZaLknSBSjCPr6R1J7EOukIGaOtm5OCGdY7x1MU-V8wDa5p1Lvw7O_kJYFyainakxcPL1zLorByQUJ52Lrg3cBgCHZ91wXlLuaiq49itsbQeVUarPDqqk1C-oMmBMJNPdq2k57yJRivNeG97olUSSZHeC0jh6UmofLabQ2i7TBJ8c-xTL7yO4a5OUCon4S0hFEi-r03bCJMn9f-kiPpAnQqA2McT1GagdoXYpMDdH2lfA7JBtZya4wwXpU80t8HkyIQ5PsYY7EUMWStVG2zaFcwYREzURS3k_jlhw9Rvw-ysPcOFPh5dBHxJAW_UR-EdYSMyqmIZMlEaAMhCwrRglVG3N1DI1y2i9ms2WZ7IxwATHnL6pY7S1jAG6l1EiqMxcY42Tsi4_ZmzcWhU8aE7xfkr5pPeJsjx4UvHgswR9P43wGmuRiWldZVdBShlrp3Aq-TxU8RXnObJI96r3UKSvNqs9WUTU-Aq6pMARp8tQijWZrkmnlBaUjE17Tj7dMhH03-AyJa9mliM26Tyiwmvpb9aZPdAU-u9L6f1vJeqKJMmA1VXFNk2srLsvSXwOVRmQSc9B7ZMpAiDTKK5hDKbP2DOQ3clDxm02BdeD5EtInAt-ewo1FIeLJsvCCkWYLwn-2-SIrW4iiJRpvnyECnsUXqLRfc42yisUS2LK8pRXMCXdnzYu2RJKyX6yFLGvFVilI8SlZyhxVlmUJ3iehAJv9gnpx5TnZ-L4hUl25aKqh7wM2JWSrKhNwFixKvyt3QBwIr24KycPXJo9dXh31TPcpLa0L5qPVGVe5r16Wo-qmSZxS7V731u7Z1nSiTpveO63BnrUWfBA3Mx-AD1GSsdOGj-mUgVv3mZG-2wJVlQwgZ8Sj0tU2hrDW_LNqDTm5p7oKt-Rafw3PusAj9DMK3DodD2JDX53k8wlvqXdGtO1_Pg8s6dxTeHy34RXAmhlWEDrhUOzKq5114onVXCZDnkW2x_byWmrmNLLsyj8AtzFN2-3g_pbKWj911MfW_Rljiz0hbBFR6VXLIp0B8ehlavGFNBOS2EgRYqVr6iy6ZL9jd97ts_QBjz3ZvVvzAzk2AkGaXfG856Uphq9Imp08hmp6Wlzqrfjhh1kLLobQJCKBEhHUD8HKJUa4LRCMMHYioAA8tNiohAKTzYWwwcolgHBx028fNoUAAAecx7ggFGhSLgNhtCKhgCAAoR3GDaSnOieUIAKQmBeCoDp23GD8A-wASS0KoNU51eOfD-_97YTwpzAG7FD57DBIjPApKcc4z2xTPfKHAOwbBDsw522wE7cBrskheBZDOAA1Mcu38L8HMHQEczx4IZxxKgJ7RO6BIEUNoUn12myaG0BSEHBAbBommBcSyq9iByGvAAc6quiAAXwoMIUAudE_xyYMndAuD1mILwLgWPocLanKgOw5R-CE6Jyg4g7AYDXZkGwYAWuYdmBgH4PgqhrtNAUCKAAPDEEQAA-Cndgqd0Fp_T4QzQ1AihNzD7HMP2RzDkC8JYNv8Tc-AEQCkSPc-nYh5Ds322dd664BX93_2pzZ64AoOHqA3dl_NyTvXdwlhzDoOyOnKqkBvAWDoc4Pe-9-AH0fbnNg7BqCQlAdXBO6B1m5K3wjRB1inHYLbqflvzAUjuAAYhMMfzUJhPhvCP2oBQ7EoSFC4EfhQuooCCk13fg_V-JW4Av7qR2vGv-wmR1FFN2exUHrDSH3y2xhzgEu0Xy4AtBr22wtGuw2AQIW3_DpApGXzYFX06Vd34GgCQDmG3213nzYDsE2x5zQHQEwJgG5CAO5xTyJ1RygH3wAOTzYIW0YMmzW00Djwx3SAtFIAxyuFDyqEgPNxkHxwoP5z1wAAMY9-86BXdmAmgMcRRZDDQQCrBwDbgJRmCKRUQMRsQzgbgMdYRRQODCMRRyByAxsJtOkOgJhEAVA4BVsZtCBSApt3C9hCNHCugEBNBuBdsyCiAxhoASBWwthihSh3CqhGhxC2g_D4AEACBRx3BxgmR3DSAJRoCrt9cehjB7h14uBRRhhEDwAnCUi5h-B0iIBMj1tsil8YDrs0R0BCBAcoBHtChQD8A0gxcScC9Sj7DCNkQ4A6BZ8YBpgtA3D1s8QkjEB2BXCeCPCyiFt8ATAqgJipiljYiAAyXY8Y-XbYmYzQZAbQi4fYw4yYnQHY9bM4sApAG4T4WEeI57YwfHbQK4445Y-43ox454s4_HMoVsGgGHeYs424wIrYm4k4wgQoLA1YqwsbREoY2gNodAIgVohAPAXAIcdkG4zAWsHQVQbgKXfAWINgLYcEskikqgIAA
	⚠ Please be aware that this chart is not an official demo of Apache ECharts but is made by user-generated code.
-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Lab6 - Visualização Interativa de Dados</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
    h2, h3 { text-align: center; }
    #filtros { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; }
    select { padding: 5px 10px; font-size: 16px; }
    #grafico { width: 100%; height: 600px; }
  </style>
</head>
<body>
  <h2>Dados Nacionais de Segurança Pública</h2>
  <p style="text-align: center;">Selecione um ano, estado e tipo de crime para visualizar as ocorrências registradas.</p>

  <div id="filtros">
    <select id="ano"></select>
    <select id="estado"></select>
    <select id="crime"></select>
  </div>

  <div id="grafico"></div>

  <script>
    const dados = __DADOS_JSON__;

    const selectAno = document.getElementById("ano");
    const selectEstado = document.getElementById("estado");
    const selectCrime = document.getElementById("crime");

    const anos = Object.keys(dados);
    const estados = [...new Set(Object.values(dados).flat().map(d => d.estado))].sort();
    const crimes = [...new Set(Object.values(dados).flat().map(d => d.crime))].sort();

    anos.forEach(ano => selectAno.innerHTML += `<option value="${ano}">${ano}</option>`);
    estados.forEach(e => selectEstado.innerHTML += `<option value="${e}">${e}</option>`);
    crimes.forEach(c => selectCrime.innerHTML += `<option value="${c}">${c}</option>`);

    const chart = echarts.init(document.getElementById("grafico"));

    function atualizarGrafico() {
      const ano = selectAno.value;
      const estado = selectEstado.value;
      const crime = selectCrime.value;

      const filtro = dados[ano].filter(d => {
        return (estado === d.estado || estado === "Todos") &&
               (crime === d.crime || crime === "Todos");
      });

      const porEstado = filtro.reduce((acc, cur) => {
        acc[cur.estado] = (acc[cur.estado] || 0) + cur.ocorrencias;
        return acc;
      }, {});

      const categorias = Object.keys(porEstado);
      const valores = Object.values(porEstado);

      chart.setOption({
        title: {
          text: `Ocorrências em ${ano}`,
          left: 'center'
        },
        tooltip: {},
        xAxis: {
          type: 'category',
          data: categorias
        },
        yAxis: {
          type: 'value'
        },
        series: [{
          type: 'bar',
          data: valores
        }]
      });
    }

    selectAno.onchange = atualizarGrafico;
    selectEstado.onchange = atualizarGrafico;
    selectCrime.onchange = atualizarGrafico;

    selectEstado.innerHTML = `<option value="Todos">Todos os Estados</option>` + selectEstado.innerHTML;
    selectCrime.innerHTML = `<option value="Todos">Todos os Crimes</option>` + selectCrime.innerHTML;

    selectAno.value = anos[0];
    selectEstado.value = "Todos";
    selectCrime.value = "Todos";
    atualizarGrafico();
  </script>

  <script>
    const __DADOS_JSON__ = __AQUI__;
  </script>
</body>
</html>


